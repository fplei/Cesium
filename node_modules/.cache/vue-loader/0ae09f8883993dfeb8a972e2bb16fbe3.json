{"remainingRequest":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_gantt-elastic@1.0.12@gantt-elastic/src/components/Chart/DependencyLines.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_gantt-elastic@1.0.12@gantt-elastic/src/components/Chart/DependencyLines.vue","mtime":499162500000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGVwZW5kZW5jeUxpbmVzJywKICBpbmplY3Q6IFsncm9vdCddLAogIHByb3BzOiBbJ3Rhc2tzJ10sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICogR2V0IHBhdGggcG9pbnRzCiAgICAgKgogICAgICogQHBhcmFtIHthbnl9IGZyb21UYXNrSWQKICAgICAqIEBwYXJhbSB7YW55fSB0b1Rhc2tJZAogICAgICogQHJldHVybnMge3N0cmluZ30KICAgICAqLwogICAgZ2V0UG9pbnRzKGZyb21UYXNrSWQsIHRvVGFza0lkKSB7CiAgICAgIGNvbnN0IGZyb21UYXNrID0gdGhpcy5yb290LmdldFRhc2soZnJvbVRhc2tJZCk7CiAgICAgIGNvbnN0IHRvVGFzayA9IHRoaXMucm9vdC5nZXRUYXNrKHRvVGFza0lkKTsKICAgICAgaWYgKAogICAgICAgIGZyb21UYXNrID09PSBudWxsIHx8CiAgICAgICAgdG9UYXNrID09PSBudWxsIHx8CiAgICAgICAgIXRoaXMucm9vdC5pc1Rhc2tWaXNpYmxlKHRvVGFzaykgfHwKICAgICAgICAhdGhpcy5yb290LmlzVGFza1Zpc2libGUoZnJvbVRhc2spCiAgICAgICkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGNvbnN0IHN0YXJ0WCA9IGZyb21UYXNrLnggKyBmcm9tVGFzay53aWR0aDsKICAgICAgY29uc3Qgc3RhcnRZID0gZnJvbVRhc2sueSArIGZyb21UYXNrLmhlaWdodCAvIDI7CiAgICAgIGNvbnN0IHN0b3BYID0gdG9UYXNrLng7CiAgICAgIGNvbnN0IHN0b3BZID0gdG9UYXNrLnkgKyB0b1Rhc2suaGVpZ2h0IC8gMjsKICAgICAgY29uc3QgZGlzdGFuY2VYID0gc3RvcFggLSBzdGFydFg7CiAgICAgIGxldCBkaXN0YW5jZVk7CiAgICAgIGxldCB5TXVsdGlwbGllciA9IDE7CiAgICAgIGlmIChzdG9wWSA+PSBzdGFydFkpIHsKICAgICAgICBkaXN0YW5jZVkgPSBzdG9wWSAtIHN0YXJ0WTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkaXN0YW5jZVkgPSBzdGFydFkgLSBzdG9wWTsKICAgICAgICB5TXVsdGlwbGllciA9IC0xOwogICAgICB9CiAgICAgIGNvbnN0IG9mZnNldCA9IDEwOwogICAgICBjb25zdCByb3VuZG5lc3MgPSA0OwogICAgICBjb25zdCBpc0JlZm9yZSA9IGRpc3RhbmNlWCA8PSBvZmZzZXQgKyByb3VuZG5lc3M7CiAgICAgIGxldCBwb2ludHMgPSBgTSAke3N0YXJ0WH0gJHtzdGFydFl9CiAgICAgICAgICBMICR7c3RhcnRYICsgb2Zmc2V0fSwke3N0YXJ0WX0gYDsKICAgICAgaWYgKGlzQmVmb3JlKSB7CiAgICAgICAgcG9pbnRzICs9IGBRICR7c3RhcnRYICsgb2Zmc2V0ICsgcm91bmRuZXNzfSwke3N0YXJ0WX0gJHtzdGFydFggKyBvZmZzZXQgKyByb3VuZG5lc3N9LCR7c3RhcnRZICsKICAgICAgICAgIHJvdW5kbmVzcyAqIHlNdWx0aXBsaWVyfQogICAgICAgICAgICBMICR7c3RhcnRYICsgb2Zmc2V0ICsgcm91bmRuZXNzfSwke3N0YXJ0WSArIChkaXN0YW5jZVkgKiB5TXVsdGlwbGllcikgLyAyIC0gcm91bmRuZXNzICogeU11bHRpcGxpZXJ9CiAgICAgICAgICAgIFEgJHtzdGFydFggKyBvZmZzZXQgKyByb3VuZG5lc3N9LCR7c3RhcnRZICsgKGRpc3RhbmNlWSAqIHlNdWx0aXBsaWVyKSAvIDJ9ICR7c3RhcnRYICsgb2Zmc2V0fSwke3N0YXJ0WSArCiAgICAgICAgICAoZGlzdGFuY2VZICogeU11bHRpcGxpZXIpIC8gMn0KICAgICAgICAgICAgTCAke3N0YXJ0WCAtIG9mZnNldCArIGRpc3RhbmNlWH0sJHtzdGFydFkgKyAoZGlzdGFuY2VZICogeU11bHRpcGxpZXIpIC8gMn0KICAgICAgICAgICAgUSAke3N0YXJ0WCAtIG9mZnNldCArIGRpc3RhbmNlWCAtIHJvdW5kbmVzc30sJHtzdGFydFkgKyAoZGlzdGFuY2VZICogeU11bHRpcGxpZXIpIC8gMn0gJHtzdGFydFggLQogICAgICAgICAgb2Zmc2V0ICsKICAgICAgICAgIGRpc3RhbmNlWCAtCiAgICAgICAgICByb3VuZG5lc3N9LCR7c3RhcnRZICsgKGRpc3RhbmNlWSAqIHlNdWx0aXBsaWVyKSAvIDIgKyByb3VuZG5lc3MgKiB5TXVsdGlwbGllcn0KICAgICAgICAgICAgTCAke3N0YXJ0WCAtIG9mZnNldCArIGRpc3RhbmNlWCAtIHJvdW5kbmVzc30sJHtzdG9wWSAtIHJvdW5kbmVzcyAqIHlNdWx0aXBsaWVyfQogICAgICAgICAgICBRICR7c3RhcnRYIC0gb2Zmc2V0ICsgZGlzdGFuY2VYIC0gcm91bmRuZXNzfSwke3N0b3BZfSAke3N0YXJ0WCAtIG9mZnNldCArIGRpc3RhbmNlWH0sJHtzdG9wWX0KICAgICAgICAgICAgTCAke3N0b3BYfSwke3N0b3BZfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcG9pbnRzICs9IGBMICR7c3RhcnRYICsgZGlzdGFuY2VYIC8gMiAtIHJvdW5kbmVzc30sJHtzdGFydFl9CiAgICAgICAgICAgIFEgJHtzdGFydFggKyBkaXN0YW5jZVggLyAyfSwke3N0YXJ0WX0gJHtzdGFydFggKyBkaXN0YW5jZVggLyAyfSwke3N0YXJ0WSArIHJvdW5kbmVzcyAqIHlNdWx0aXBsaWVyfQogICAgICAgICAgICBMICR7c3RhcnRYICsgZGlzdGFuY2VYIC8gMn0sJHtzdG9wWSAtIHJvdW5kbmVzcyAqIHlNdWx0aXBsaWVyfQogICAgICAgICAgICBRICR7c3RhcnRYICsgZGlzdGFuY2VYIC8gMn0sJHtzdG9wWX0gJHtzdGFydFggKyBkaXN0YW5jZVggLyAyICsgcm91bmRuZXNzfSwke3N0b3BZfQogICAgICAgICAgICBMICR7c3RvcFh9LCR7c3RvcFl9YDsKICAgICAgfQogICAgICByZXR1cm4gcG9pbnRzOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICogR2V0IHRhc2tzIHdoaWNoIGFyZSBkZXBlbmRlbnQgb24gb3RoZXIgdGFza3MKICAgICAqCiAgICAgKiBAcmV0dXJucyB7YXJyYXl9CiAgICAgKi8KICAgIGRlcGVuZGVuY3lUYXNrcygpIHsKICAgICAgcmV0dXJuIHRoaXMudGFza3MKICAgICAgICAuZmlsdGVyKHRhc2sgPT4gdHlwZW9mIHRhc2suZGVwZW5kZW50T24gIT09ICd1bmRlZmluZWQnKQogICAgICAgIC5tYXAodGFzayA9PiB7CiAgICAgICAgICB0YXNrLmRlcGVuZGVuY3lMaW5lcyA9IHRhc2suZGVwZW5kZW50T24ubWFwKGlkID0+IHsKICAgICAgICAgICAgcmV0dXJuIHsgcG9pbnRzOiB0aGlzLmdldFBvaW50cyhpZCwgdGFzay5pZCksIHRhc2tfaWQ6IGlkIH07CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB0YXNrOwogICAgICAgIH0pCiAgICAgICAgLmZpbHRlcih0YXNrID0+IHRhc2suZGVwZW5kZW5jeUxpbmVzLnBvaW50cyAhPT0gbnVsbCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["DependencyLines.vue"],"names":[],"mappings":";AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DependencyLines.vue","sourceRoot":"node_modules/_gantt-elastic@1.0.12@gantt-elastic/src/components/Chart","sourcesContent":["<!--\n/**\n * @fileoverview DependencyLines component\n * @license MIT\n * @author Rafal Pospiech <neuronet.io@gmail.com>\n * @package GanttElastic\n */\n-->\n<template>\n  <svg\n    x=\"0\"\n    y=\"0\"\n    width=\"100%\"\n    height=\"100%\"\n    class=\"gantt-elastic__chart-dependency-lines-container\"\n    :style=\"{ ...root.style['chart-dependency-lines-container'] }\"\n  >\n    <g v-for=\"task in dependencyTasks\" :key=\"task.id\" :task=\"task\">\n      <path\n        class=\"gantt-elastic__chart-dependency-lines-path\"\n        :style=\"{ ...root.style['chart-dependency-lines-path'], ...task.style['chart-dependency-lines-path'], ...task.style['chart-dependency-lines-path-' + dependencyLine.task_id] }\"\n        v-for=\"dependencyLine in task.dependencyLines\"\n        :key=\"dependencyLine.id\"\n        :task=\"task\"\n        :d=\"dependencyLine.points\"\n      ></path>\n    </g>\n  </svg>\n</template>\n\n<script>\nexport default {\n  name: 'DependencyLines',\n  inject: ['root'],\n  props: ['tasks'],\n  data() {\n    return {};\n  },\n  methods: {\n    /**\n     * Get path points\n     *\n     * @param {any} fromTaskId\n     * @param {any} toTaskId\n     * @returns {string}\n     */\n    getPoints(fromTaskId, toTaskId) {\n      const fromTask = this.root.getTask(fromTaskId);\n      const toTask = this.root.getTask(toTaskId);\n      if (\n        fromTask === null ||\n        toTask === null ||\n        !this.root.isTaskVisible(toTask) ||\n        !this.root.isTaskVisible(fromTask)\n      ) {\n        return null;\n      }\n      const startX = fromTask.x + fromTask.width;\n      const startY = fromTask.y + fromTask.height / 2;\n      const stopX = toTask.x;\n      const stopY = toTask.y + toTask.height / 2;\n      const distanceX = stopX - startX;\n      let distanceY;\n      let yMultiplier = 1;\n      if (stopY >= startY) {\n        distanceY = stopY - startY;\n      } else {\n        distanceY = startY - stopY;\n        yMultiplier = -1;\n      }\n      const offset = 10;\n      const roundness = 4;\n      const isBefore = distanceX <= offset + roundness;\n      let points = `M ${startX} ${startY}\n          L ${startX + offset},${startY} `;\n      if (isBefore) {\n        points += `Q ${startX + offset + roundness},${startY} ${startX + offset + roundness},${startY +\n          roundness * yMultiplier}\n            L ${startX + offset + roundness},${startY + (distanceY * yMultiplier) / 2 - roundness * yMultiplier}\n            Q ${startX + offset + roundness},${startY + (distanceY * yMultiplier) / 2} ${startX + offset},${startY +\n          (distanceY * yMultiplier) / 2}\n            L ${startX - offset + distanceX},${startY + (distanceY * yMultiplier) / 2}\n            Q ${startX - offset + distanceX - roundness},${startY + (distanceY * yMultiplier) / 2} ${startX -\n          offset +\n          distanceX -\n          roundness},${startY + (distanceY * yMultiplier) / 2 + roundness * yMultiplier}\n            L ${startX - offset + distanceX - roundness},${stopY - roundness * yMultiplier}\n            Q ${startX - offset + distanceX - roundness},${stopY} ${startX - offset + distanceX},${stopY}\n            L ${stopX},${stopY}`;\n      } else {\n        points += `L ${startX + distanceX / 2 - roundness},${startY}\n            Q ${startX + distanceX / 2},${startY} ${startX + distanceX / 2},${startY + roundness * yMultiplier}\n            L ${startX + distanceX / 2},${stopY - roundness * yMultiplier}\n            Q ${startX + distanceX / 2},${stopY} ${startX + distanceX / 2 + roundness},${stopY}\n            L ${stopX},${stopY}`;\n      }\n      return points;\n    }\n  },\n  computed: {\n    /**\n     * Get tasks which are dependent on other tasks\n     *\n     * @returns {array}\n     */\n    dependencyTasks() {\n      return this.tasks\n        .filter(task => typeof task.dependentOn !== 'undefined')\n        .map(task => {\n          task.dependencyLines = task.dependentOn.map(id => {\n            return { points: this.getPoints(id, task.id), task_id: id };\n          });\n          return task;\n        })\n        .filter(task => task.dependencyLines.points !== null);\n    }\n  }\n};\n</script>\n"]}]}