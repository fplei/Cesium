{"remainingRequest":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_gantt-elastic@1.0.12@gantt-elastic/src/components/Chart/Grid.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_gantt-elastic@1.0.12@gantt-elastic/src/components/Chart/Grid.vue","mtime":499162500000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/babel.config.js","mtime":1658370777000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/fanpenglei/Study/Code/cesium-demoV1.1/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdHcmlkJywKICBpbmplY3Q6IFsncm9vdCddLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIC8qKgogICAqIENyZWF0ZWQKICAgKi8KICBjcmVhdGVkKCkgewogICAgdGhpcy5yb290LiRvbigncmVjZW50ZXJQb3NpdGlvbicsIHRoaXMucmVjZW50ZXJQb3NpdGlvbik7CiAgfSwKCiAgLyoqCiAgICogTW91bnRlZAogICAqLwogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAvLyBiZWNhdXNlIG9mIHN0dXBpZCBzbGlkZXIgOi8KICAgICAgICB0aGlzLnJvb3Quc2Nyb2xsVG9UaW1lKHRoaXMudGltZUxpbmVQb3NpdGlvbi50aW1lKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIFJlY2VudGVyIHBvc2l0aW9uIC0gZ28gdG8gY3VycmVudCB0aW1lIGxpbmUKICAgICAqLwogICAgcmVjZW50ZXJQb3NpdGlvbigpIHsKICAgICAgdGhpcy5yb290LnNjcm9sbFRvVGltZSh0aGlzLnRpbWVMaW5lUG9zaXRpb24udGltZSk7CiAgICB9CgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICogR2VuZXJhdGUgdmVydGljYWwgbGluZXMgb2YgdGhlIGdyaWQKICAgICAqCiAgICAgKiBAcmV0dXJucyB7YXJyYXl9CiAgICAgKi8KICAgIHZlcnRpY2FsTGluZXMoKSB7CiAgICAgIGxldCBsaW5lcyA9IFtdOwogICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucm9vdC5zdGF0ZTsKICAgICAgc3RhdGUub3B0aW9ucy50aW1lcy5zdGVwcy5mb3JFYWNoKHN0ZXAgPT4gewogICAgICAgIGlmICh0aGlzLnJvb3QuaXNJbnNpZGVWaWV3UG9ydChzdGVwLm9mZnNldC5weCwgMSkpIHsKICAgICAgICAgIGxpbmVzLnB1c2goewogICAgICAgICAgICBrZXk6IHN0ZXAudGltZSwKICAgICAgICAgICAgeDE6IHN0ZXAub2Zmc2V0LnB4LAogICAgICAgICAgICB5MTogMCwKICAgICAgICAgICAgeDI6IHN0ZXAub2Zmc2V0LnB4LAogICAgICAgICAgICB5Mjogc3RhdGUudGFza3MubGVuZ3RoICogKHN0YXRlLm9wdGlvbnMucm93LmhlaWdodCArIHN0YXRlLm9wdGlvbnMuY2hhcnQuZ3JpZC5ob3Jpem9udGFsLmdhcCAqIDIpICsgdGhpcy5yb290LnN0eWxlWydncmlkLWxpbmUtdmVydGljYWwnXVsnc3Ryb2tlLXdpZHRoJ10KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBsaW5lczsKICAgIH0sCgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBob3Jpem9udGFsIGxpbmVzIG9mIHRoZSBncmlkCiAgICAgKgogICAgICogQHJldHVybnMge2FycmF5fQogICAgICovCiAgICBob3Jpem9udGFsTGluZXMoKSB7CiAgICAgIGxldCBsaW5lcyA9IFtdOwogICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucm9vdC5zdGF0ZS5vcHRpb25zOwogICAgICBsZXQgdGFza3MgPSB0aGlzLnJvb3QudmlzaWJsZVRhc2tzOwoKICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW4gPSB0YXNrcy5sZW5ndGg7IGluZGV4IDw9IGxlbjsgaW5kZXgrKykgewogICAgICAgIGNvbnN0IHkgPSBpbmRleCAqIChzdGF0ZS5yb3cuaGVpZ2h0ICsgc3RhdGUuY2hhcnQuZ3JpZC5ob3Jpem9udGFsLmdhcCAqIDIpICsgdGhpcy5yb290LnN0eWxlWydncmlkLWxpbmUtdmVydGljYWwnXVsnc3Ryb2tlLXdpZHRoJ10gLyAyOwogICAgICAgIGxpbmVzLnB1c2goewogICAgICAgICAga2V5OiAnaGwnICsgaW5kZXgsCiAgICAgICAgICB4MTogMCwKICAgICAgICAgIHkxOiB5LAogICAgICAgICAgeDI6ICcxMDAlJywKICAgICAgICAgIHkyOiB5CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsaW5lczsKICAgIH0sCgogICAgLyoqCiAgICAgKiBDaGVjayBpZiBzcGVjaWZpZWQgbGluZSBpcyBpbnNpZGUgdmlld3BvcnQgKHZpc2libGUpCiAgICAgKgogICAgICogQHJldHVybnMge2Z1bmN0aW9ufQogICAgICovCiAgICBpblZpZXdQb3J0KCkgewogICAgICByZXR1cm4gbGluZSA9PiB7CiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnJvb3Quc3RhdGUub3B0aW9uczsKICAgICAgICByZXR1cm4gbGluZS54MSA+PSBzdGF0ZS5zY3JvbGwuY2hhcnQubGVmdCAmJiBsaW5lLngxIDw9IHN0YXRlLnNjcm9sbC5jaGFydC5yaWdodDsKICAgICAgfTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBHZXQgY3VycmVudCB0aW1lIGxpbmUgcG9zaXRpb24KICAgICAqCiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fQogICAgICovCiAgICB0aW1lTGluZVBvc2l0aW9uKCkgewogICAgICBjb25zdCBkID0gbmV3IERhdGUoKTsKICAgICAgY29uc3QgY3VycmVudCA9IGQuZ2V0VGltZSgpOwogICAgICBjb25zdCBjdXJyZW50T2Zmc2V0ID0gdGhpcy5yb290LnRpbWVUb1BpeGVsT2Zmc2V0WChjdXJyZW50KTsKICAgICAgY29uc3QgdGltZUxpbmUgPSB7CiAgICAgICAgeDogMCwKICAgICAgICB5MTogMCwKICAgICAgICB5MjogJzEwMCUnLAogICAgICAgIGRhdGVUaW1lOiAnJywKICAgICAgICB0aW1lOiBjdXJyZW50CiAgICAgIH07CiAgICAgIHRpbWVMaW5lLnggPSBjdXJyZW50T2Zmc2V0OwogICAgICB0aW1lTGluZS5kYXRlVGltZSA9IGQudG9Mb2NhbGVEYXRlU3RyaW5nKCk7CiAgICAgIHJldHVybiB0aW1lTGluZTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AAqDA;EACAA,YADA;EAEAC,gBAFA;;EAGAC;IACA;EACA,CALA;;EAMA;AACA;AACA;EACAC;IACA;EACA,CAXA;;EAaA;AACA;AACA;EACAC;IACA;MACA;QACA;QACA;MACA,CAHA;IAIA,CALA;EAMA,CAvBA;;EAyBAC;IACA;AACA;AACA;IACAC;MACA;IACA;;EANA,CAzBA;EAkCAC;IACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACAC;QACA;UACAC;YACAC,cADA;YAEAC,kBAFA;YAGAC,KAHA;YAIAC,kBAJA;YAKAC,IACAN,gGACA;UAPA;QASA;MACA,CAZA;MAaA;IACA,CAvBA;;IAyBA;AACA;AACA;AACA;AACA;IACAO;MACA;MACA;MACA;;MACA;QACA,UACAC,mEACA,yDAFA;QAGAP;UACAC,iBADA;UAEAC,KAFA;UAGAC,KAHA;UAIAC,UAJA;UAKAC;QALA;MAOA;;MACA;IACA,CA/CA;;IAiDA;AACA;AACA;AACA;AACA;IACAG;MACA;QACA;QACA;MACA,CAHA;IAIA,CA3DA;;IA6DA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;QACAC,IADA;QAEAP,KAFA;QAGAE,UAHA;QAIAM,YAJA;QAKAC;MALA;MAOAC;MACAA;MACA;IACA;;EAhFA;AAlCA","names":["name","inject","data","created","mounted","methods","recenterPosition","computed","verticalLines","state","lines","key","x1","y1","x2","y2","horizontalLines","index","inViewPort","timeLinePosition","x","dateTime","time","timeLine"],"sourceRoot":"node_modules/_gantt-elastic@1.0.12@gantt-elastic/src/components/Chart","sources":["Grid.vue"],"sourcesContent":["<!--\n/**\n * @fileoverview Grid component\n * @license MIT\n * @author Rafal Pospiech <neuronet.io@gmail.com>\n * @package GanttElastic\n */\n-->\n<template>\n  <svg\n    class=\"gantt-elastic__grid-lines-wrapper\"\n    :style=\"{ ...root.style['grid-lines-wrapper'] }\"\n    ref=\"chart\"\n    x=\"0\"\n    y=\"0\"\n    :width=\"root.state.options.width\"\n    :height=\"root.state.options.allVisibleTasksHeight\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g class=\"gantt-elastic__grid-lines\" :style=\"{ ...root.style['grid-lines'] }\">\n      <line\n        class=\"gantt-elastic__grid-line-horizontal\"\n        :style=\"{ ...root.style['grid-line-horizontal'] }\"\n        v-for=\"line in horizontalLines\"\n        :key=\"line.key\"\n        :x1=\"line.x1\"\n        :y1=\"line.y1\"\n        :x2=\"line.x2\"\n        :y2=\"line.y2\"\n      ></line>\n      <line\n        class=\"gantt-elastic__grid-line-vertical\"\n        :style=\"{ ...root.style['grid-line-vertical'] }\"\n        v-for=\"line in verticalLines\"\n        :key=\"line.key\"\n        :x1=\"line.x1\"\n        :y1=\"line.y1\"\n        :x2=\"line.x2\"\n        :y2=\"line.y2\"\n      ></line>\n      <line\n        class=\"gantt-elastic__grid-line-time\"\n        :style=\"{ ...root.style['grid-line-time'] }\"\n        :x1=\"timeLinePosition.x\"\n        :y1=\"timeLinePosition.y1\"\n        :x2=\"timeLinePosition.x\"\n        :y2=\"timeLinePosition.y2\"\n      ></line>\n    </g>\n  </svg>\n</template>\n\n<script>\nexport default {\n  name: 'Grid',\n  inject: ['root'],\n  data() {\n    return {};\n  },\n  /**\n   * Created\n   */\n  created() {\n    this.root.$on('recenterPosition', this.recenterPosition);\n  },\n\n  /**\n   * Mounted\n   */\n  mounted() {\n    this.$nextTick(() => {\n      this.$nextTick(() => {\n        // because of stupid slider :/\n        this.root.scrollToTime(this.timeLinePosition.time);\n      });\n    });\n  },\n\n  methods: {\n    /**\n     * Recenter position - go to current time line\n     */\n    recenterPosition() {\n      this.root.scrollToTime(this.timeLinePosition.time);\n    }\n  },\n\n  computed: {\n    /**\n     * Generate vertical lines of the grid\n     *\n     * @returns {array}\n     */\n    verticalLines() {\n      let lines = [];\n      const state = this.root.state;\n      state.options.times.steps.forEach(step => {\n        if (this.root.isInsideViewPort(step.offset.px, 1)) {\n          lines.push({\n            key: step.time,\n            x1: step.offset.px,\n            y1: 0,\n            x2: step.offset.px,\n            y2:\n              state.tasks.length * (state.options.row.height + state.options.chart.grid.horizontal.gap * 2) +\n              this.root.style['grid-line-vertical']['stroke-width']\n          });\n        }\n      });\n      return lines;\n    },\n\n    /**\n     * Generate horizontal lines of the grid\n     *\n     * @returns {array}\n     */\n    horizontalLines() {\n      let lines = [];\n      const state = this.root.state.options;\n      let tasks = this.root.visibleTasks;\n      for (let index = 0, len = tasks.length; index <= len; index++) {\n        const y =\n          index * (state.row.height + state.chart.grid.horizontal.gap * 2) +\n          this.root.style['grid-line-vertical']['stroke-width'] / 2;\n        lines.push({\n          key: 'hl' + index,\n          x1: 0,\n          y1: y,\n          x2: '100%',\n          y2: y\n        });\n      }\n      return lines;\n    },\n\n    /**\n     * Check if specified line is inside viewport (visible)\n     *\n     * @returns {function}\n     */\n    inViewPort() {\n      return line => {\n        const state = this.root.state.options;\n        return line.x1 >= state.scroll.chart.left && line.x1 <= state.scroll.chart.right;\n      };\n    },\n\n    /**\n     * Get current time line position\n     *\n     * @returns {object}\n     */\n    timeLinePosition() {\n      const d = new Date();\n      const current = d.getTime();\n      const currentOffset = this.root.timeToPixelOffsetX(current);\n      const timeLine = {\n        x: 0,\n        y1: 0,\n        y2: '100%',\n        dateTime: '',\n        time: current\n      };\n      timeLine.x = currentOffset;\n      timeLine.dateTime = d.toLocaleDateString();\n      return timeLine;\n    }\n  }\n};\n</script>\n"]}]}